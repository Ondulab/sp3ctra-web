---
import { Image } from 'astro:assets';
import Heading from '../base/Heading.astro';
import Button from '../base/Button.astro';
import placeholderDevice from '../../assets/images/hero/placeholder-device.svg';

interface Props {
  headline: string;
  subheadline?: string;
  description: string;
  cta: {
    label: string;
    href: string;
    variant?: 'primary' | 'secondary';
  };
  recognitionBadge: {
    text: string;
    icon?: string;
    alt?: string;
  };
  imageSrc?: string | any; // Path or Astro ImageMetadata
  imageAlt: string;
  layout?: 'centered' | 'split';    // Centered: text over image, Split: text + image side-by-side
  class?: string;
}

const { 
  headline, 
  subheadline, 
  description, 
  cta, 
  recognitionBadge, 
  imageSrc = placeholderDevice, 
  imageAlt, 
  layout = 'split',
  class: className 
} = Astro.props;
---

<section class={`hero-section py-16 md:py-24 lg:py-32 ${className || ''}`}>
  <div class="container mx-auto px-4 md:px-6 lg:px-8">
    {layout === 'split' ? (
      <!-- Split Layout: Desktop side-by-side, Mobile stacked -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
        <!-- Content Column -->
        <div class="space-y-8">
          <!-- Recognition Badge -->
          <div class="flex items-center gap-3">
            {recognitionBadge.icon && (
              <img 
                src={recognitionBadge.icon} 
                alt={recognitionBadge.alt || ''} 
                class="w-8 h-8 flex-shrink-0"
              />
            )}
            <span class="text-sm font-medium text-foreground/80">
              {recognitionBadge.text}
            </span>
          </div>

          <!-- Headlines -->
          <div class="space-y-4">
            <Heading 
              as="h1" 
              level="h1" 
              color="gradient"
              class="max-w-xl"
            >
              {headline}
            </Heading>
            {subheadline && (
              <Heading 
                as="h2" 
                level="h3" 
                color="muted"
                class="max-w-2xl"
              >
                {subheadline}
              </Heading>
            )}
          </div>

          <!-- Description -->
          <p class="text-lg md:text-xl text-foreground/80 max-w-2xl leading-relaxed">
            {description}
          </p>

          <!-- CTA Button -->
          <div class="pt-4">
            <Button 
              href={cta.href}
              variant={cta.variant || 'primary'}
              size="lg"
              class="min-w-[200px]"
            >
              {cta.label}
            </Button>
          </div>
        </div>

        <!-- Image Column -->
        <div class="relative">
          <div class="aspect-[4/3] lg:aspect-[3/4] overflow-hidden rounded-2xl bg-surface">
            <Image 
              src={imageSrc}
              alt={imageAlt}
              class="w-full h-full object-cover"
              widths={[375, 768, 1024, 1920]}
              sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 600px"
              format="webp"
              loading="eager"
            />
          </div>
        </div>
      </div>
    ) : (
      <!-- Centered Layout: Text over/with background image -->
      <div class="relative text-center max-w-4xl mx-auto">
        <!-- Background Image (if centered layout) -->
        <div class="absolute inset-0 -z-10 rounded-3xl overflow-hidden">
          <Image 
            src={imageSrc}
            alt=""
            class="w-full h-full object-cover opacity-20"
            widths={[768, 1024, 1920]}
            sizes="100vw"
            format="webp"
            loading="eager"
          />
        </div>

        <!-- Content -->
        <div class="space-y-8 py-16 md:py-24">
          <!-- Recognition Badge -->
          <div class="flex items-center justify-center gap-3">
            {recognitionBadge.icon && (
              <img 
                src={recognitionBadge.icon} 
                alt={recognitionBadge.alt || ''} 
                class="w-8 h-8"
              />
            )}
            <span class="text-sm font-medium text-foreground/80">
              {recognitionBadge.text}
            </span>
          </div>

          <!-- Headlines -->
          <div class="space-y-4">
            <Heading 
              as="h1" 
              level="h1" 
              color="gradient"
            >
              {headline}
            </Heading>
            {subheadline && (
              <Heading 
                as="h2" 
                level="h3" 
                color="muted"
              >
                {subheadline}
              </Heading>
            )}
          </div>

          <!-- Description -->
          <p class="text-lg md:text-xl text-foreground/80 max-w-2xl mx-auto leading-relaxed">
            {description}
          </p>

          <!-- CTA Button -->
          <div class="pt-4">
            <Button 
              href={cta.href}
              variant={cta.variant || 'primary'}
              size="lg"
              class="min-w-[200px]"
            >
              {cta.label}
            </Button>
          </div>
        </div>
      </div>
    )}
  </div>
</section>